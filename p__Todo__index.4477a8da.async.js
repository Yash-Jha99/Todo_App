"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[352],{66378:function(qe,ve,s){s.r(ve),s.d(ve,{default:function(){return Xe}});var xe=s(97857),V=s.n(xe),Ee=s(15009),h=s.n(Ee),Pe=s(99289),P=s.n(Pe),Fe=s(19632),z=s.n(Fe),Ae=s(5574),y=s.n(Ae),ae=s(35312);function Oe(Z,m){return de.apply(this,arguments)}function de(){return de=P()(h()().mark(function Z(m,D){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,ae.request)("/api/todo",V()({method:"GET",params:V()({},m)},D||{})));case 1:case"end":return d.stop()}},Z)})),de.apply(this,arguments)}function ke(Z,m){return ce.apply(this,arguments)}function ce(){return ce=P()(h()().mark(function Z(m,D){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,ae.request)("/api/todo",V()({method:"POST",data:m},D||{})));case 1:case"end":return d.stop()}},Z)})),ce.apply(this,arguments)}function Re(Z,m){return pe.apply(this,arguments)}function pe(){return pe=P()(h()().mark(function Z(m,D){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,ae.request)("/api/todo",V()({method:"PUT",data:m},D||{})));case 1:case"end":return d.stop()}},Z)})),pe.apply(this,arguments)}function Le(Z,m){return fe.apply(this,arguments)}function fe(){return fe=P()(h()().mark(function Z(m,D){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,ae.request)("/api/todo",V()({method:"DELETE",data:m},D||{})));case 1:case"end":return d.stop()}},Z)})),fe.apply(this,arguments)}var $e=s(34804),Ve=s(16714),C=s(2453),q=s(51904),R=s(26713),ze=s(86738),Ge=s(71648),he=s(71577),f=s(67294),Be=s(52677),Ne=s.n(Be),me=s(51042),ge=s(99351),M=s(97269),ye=s(5966),Ce=s(64317),Se=s(50335),Te=s(90672),De=s(50261),je=s(92195),Ze=s(48726),se=s(96365),we=s(83062),e=s(85893),Ke=function(m){var D=m.handleAddFormOpen,S=m.addFormOpen,d=m.handleAdd,G=m.actionRef,v=De.Z.useForm(),_=y()(v,1),Y=_[0],ee=je.Z.useToken(),W=ee.token,te=(0,f.useState)([]),B=y()(te,2),I=B[0],T=B[1],A=(0,f.useState)(!1),J=y()(A,2),L=J[0],O=J[1],H=(0,f.useState)(""),N=y()(H,2),g=N[0],w=N[1],F=(0,f.useState)(-1),Q=y()(F,2),K=Q[0],U=Q[1],X=(0,f.useState)(""),c=y()(X,2),a=c[0],t=c[1],u=(0,f.useRef)(null),p=(0,f.useRef)(null);(0,f.useEffect)(function(){if(L){var l;(l=u.current)===null||l===void 0||l.focus()}},[L]),(0,f.useEffect)(function(){var l;(l=p.current)===null||l===void 0||l.focus()},[g]);var o=function(r){var n=I.filter(function(i){return i!==r});console.log(n),T(n)},$=function(){O(!0)},j=function(r){w(r.target.value)},ue=function(){g&&I.indexOf(g)===-1&&T([].concat(z()(I),[g])),O(!1),w("")},oe=function(r){t(r.target.value)},ie=function(){var r=z()(I);r[K]=a,T(r),U(-1),w("")},re={width:100,verticalAlign:"top"},le={background:W.colorBgContainer,borderStyle:"dashed"};return(0,e.jsxs)(ge.Y,{title:"Add Todo",form:Y,onOpenChange:D,open:S,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){T([])}},submitTimeout:2e3,onFinish:function(){var l=P()(h()().mark(function r(n){var i,x,k;return h()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(console.log(Ne()(n.dueDate)),!(n.title===void 0||n.title.trim()==="")){b.next=4;break}return C.ZP.error("Title is mandatory"),b.abrupt("return");case 4:if(!(n.description===void 0||n.description.trim()==="")){b.next=7;break}return C.ZP.error("Description is mandatory"),b.abrupt("return");case 7:if(!(n.status===void 0||n.status.trim()==="")){b.next=10;break}return C.ZP.error("Status is mandatory"),b.abrupt("return");case 10:if(!(n.dueDate&&new Date(n.dueDate)<=new Date)){b.next=13;break}return C.ZP.error("Due date should be more than current date"),b.abrupt("return");case 13:return x={key:Math.ceil(Math.random()*1e6)+Date.now(),createdAt:Date.now(),title:n.title,description:n.description,tags:I!=null?I:[],dueDate:(i=Number(new Date(n.dueDate)))!==null&&i!==void 0?i:0,status:n.status},b.next=16,d(x);case 16:k=b.sent,k&&(D(!1),T([]),G.current&&G.current.reload());case 18:case"end":return b.stop()}},r)}));return function(r){return l.apply(this,arguments)}}(),children:[(0,e.jsxs)(M.A.Group,{children:[(0,e.jsx)(ye.Z,{width:"md",name:"title",label:"Title",tooltip:"Upto 100 characters",placeholder:"Please enter a title",fieldProps:{maxLength:100,showCount:!0,required:!0},required:!0}),(0,e.jsx)(Ce.Z,{request:P()(h()().mark(function l(){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",[{value:"close",label:"Open"},{value:"running",label:"Working"},{value:"online",label:"Done"},{value:"error",label:"Over Due"}]);case 1:case"end":return n.stop()}},l)})),width:"xs",name:"status",label:"Status",required:!0}),(0,e.jsx)(Se.Z,{name:"dueDate",label:"Due Date"})]}),(0,e.jsxs)(M.A.Group,{children:[(0,e.jsx)(Te.Z,{width:"md",name:"description",label:"Description",placeholder:"Please enter a description",fieldProps:{maxLength:1e3,showCount:!0,required:!0},required:!0}),(0,e.jsxs)(M.A.Group,{direction:"vertical",children:[(0,e.jsx)(Ze.Z,{style:{paddingBottom:8},children:"Tags"}),(0,e.jsx)(R.Z,{direction:"vertical",size:[0,8],children:(0,e.jsxs)(R.Z,{size:[0,4],wrap:!0,children:[(0,e.jsx)(R.Z,{size:[0,8],wrap:!0,children:I.map(function(l,r){if(K===r)return(0,e.jsx)(se.Z,{ref:p,size:"small",style:re,value:a,onChange:oe,onBlur:ie,onPressEnter:ie},l);var n=l.length>20,i=(0,e.jsx)(q.Z,{closable:!0,style:{userSelect:"none"},onClose:function(){return o(l)},children:(0,e.jsx)("span",{onDoubleClick:function(k){r!==0&&(U(r),t(l),k.preventDefault())},children:n?"".concat(l.slice(0,20),"..."):l})},l);return n?(0,e.jsx)(we.Z,{title:l,children:i},l):i})}),L?(0,e.jsx)(se.Z,{ref:u,type:"text",size:"small",style:re,value:g,onChange:j,onBlur:ue,onPressEnter:ue}):(0,e.jsxs)(q.Z,{style:le,onClick:$,children:[(0,e.jsx)(me.Z,{})," New Tag"]})]})})]})]})]})},Ue=Ke,Me=function(m){var D=m.handleEditFormOpen,S=m.editFormOpen,d=m.handleEdit,G=m.actionRef,v=m.todoData,_=De.Z.useForm(),Y=y()(_,1),ee=Y[0],W=je.Z.useToken(),te=W.token,B=(0,f.useState)([]),I=y()(B,2),T=I[0],A=I[1],J=(0,f.useState)(!1),L=y()(J,2),O=L[0],H=L[1],N=(0,f.useState)(""),g=y()(N,2),w=g[0],F=g[1],Q=(0,f.useState)(-1),K=y()(Q,2),U=K[0],X=K[1],c=(0,f.useState)(""),a=y()(c,2),t=a[0],u=a[1],p=(0,f.useRef)(null),o=(0,f.useRef)(null);(0,f.useEffect)(function(){if(O){var r;(r=p.current)===null||r===void 0||r.focus()}},[O]),(0,f.useEffect)(function(){var r;(r=o.current)===null||r===void 0||r.focus()},[w]);var $=function(n){var i=T.filter(function(x){return x!==n});console.log(i),A(i)},j=function(){H(!0)},ue=function(n){F(n.target.value)},oe=function(){w&&T.indexOf(w)===-1&&A([].concat(z()(T),[w])),H(!1),F("")},ie=function(n){u(n.target.value)},re=function(){var n=z()(T);n[U]=t,A(n),X(-1),F("")},le={width:100,verticalAlign:"top"},l={background:te.colorBgContainer,borderStyle:"dashed"};return(0,f.useEffect)(function(){var r;A((r=v==null?void 0:v.tags)!==null&&r!==void 0?r:[])},[v==null?void 0:v.tags]),(0,e.jsxs)(ge.Y,{title:"Edit Todo",form:ee,onOpenChange:D,open:S,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){return A([])}},submitTimeout:2e3,onFinish:function(){var r=P()(h()().mark(function n(i){var x,k,ne;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(i.title===void 0||i.title.trim()==="")){E.next=3;break}return C.ZP.error("Title is mandatory"),E.abrupt("return");case 3:if(!(i.description===void 0||i.description.trim()==="")){E.next=6;break}return C.ZP.error("Description is mandatory"),E.abrupt("return");case 6:if(!(i.status===void 0||i.status.trim()==="")){E.next=9;break}return C.ZP.error("Status is mandatory"),E.abrupt("return");case 9:if(!(i.dueDate&&new Date(i.dueDate)<=new Date)){E.next=12;break}return C.ZP.error("Due date should be more than current date"),E.abrupt("return");case 12:return k={key:v==null?void 0:v.key,createdAt:Date.now(),title:i.title,description:i.description,tags:T!=null?T:[],dueDate:(x=Number(new Date(i.dueDate)))!==null&&x!==void 0?x:0,status:i.status},E.next=15,d(k);case 15:ne=E.sent,ne&&(D(!1),A([]),G.current&&G.current.reload());case 17:case"end":return E.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),children:[(0,e.jsxs)(M.A.Group,{children:[(0,e.jsx)(ye.Z,{width:"md",name:"title",label:"Title",tooltip:"Upto 100 characters",placeholder:"Please enter a title",initialValue:v==null?void 0:v.title,fieldProps:{maxLength:100,showCount:!0,required:!0},required:!0}),(0,e.jsx)(Ce.Z,{request:P()(h()().mark(function r(){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[{value:"close",label:"Open"},{value:"running",label:"Working"},{value:"online",label:"Done"},{value:"error",label:"Over Due"}]);case 1:case"end":return i.stop()}},r)})),width:"xs",name:"status",label:"Status",initialValue:v==null?void 0:v.status,required:!0}),(0,e.jsx)(Se.Z,{initialValue:v==null?void 0:v.dueDate,name:"dueDate",label:"Due Date"})]}),(0,e.jsxs)(M.A.Group,{children:[(0,e.jsx)(Te.Z,{initialValue:v==null?void 0:v.description,width:"md",name:"description",label:"Description",placeholder:"Please enter a description",fieldProps:{maxLength:1e3,showCount:!0,required:!0},required:!0}),(0,e.jsxs)(M.A.Group,{direction:"vertical",children:[(0,e.jsx)(Ze.Z,{style:{paddingBottom:8},children:"Tags"}),(0,e.jsx)(R.Z,{direction:"vertical",size:[0,8],children:(0,e.jsxs)(R.Z,{size:[0,4],wrap:!0,children:[(0,e.jsx)(R.Z,{size:[0,8],wrap:!0,children:T.map(function(r,n){if(U===n)return(0,e.jsx)(se.Z,{ref:o,size:"small",style:le,value:t,onChange:ie,onBlur:re,onPressEnter:re},r);var i=r.length>20,x=(0,e.jsx)(q.Z,{closable:!0,style:{userSelect:"none"},onClose:function(){return $(r)},children:(0,e.jsx)("span",{onDoubleClick:function(ne){n!==0&&(X(n),u(r),ne.preventDefault())},children:i?"".concat(r.slice(0,20),"..."):r})},r);return i?(0,e.jsx)(we.Z,{title:r,children:x},r):x})}),O?(0,e.jsx)(se.Z,{ref:p,type:"text",size:"small",style:le,value:w,onChange:ue,onBlur:oe,onPressEnter:oe}):(0,e.jsxs)(q.Z,{style:l,onClick:j,children:[(0,e.jsx)(me.Z,{})," New Tag"]})]})})]})]})]})},Ye=Me,_e={0:"close",1:"running",2:"online",3:"error"},be={close:{text:"Open",status:"Default"},running:{text:"Working",status:"Processing"},online:{text:"Done",status:"Success"},error:{text:"Over Due",status:"Error"}},We=["magenta","red","volcano","orange","gold","lime","green","cyan","blue","geekblue","purple"],Je=function(){var m=(0,f.useState)([]),D=y()(m,2),S=D[0],d=D[1],G=(0,f.useState)(!1),v=y()(G,2),_=v[0],Y=v[1],ee=(0,f.useState)(!1),W=y()(ee,2),te=W[0],B=W[1],I=(0,f.useState)(0),T=y()(I,2),A=T[0],J=T[1],L=(0,f.useState)([]),O=y()(L,2),H=O[0],N=O[1],g=(0,f.useRef)(),w=[];S.length!==0&&S.forEach(function(c){w.push.apply(w,z()(c.tags.map(function(a,t){return{label:a,key:a+t}})))});var F=function(){var c=P()(h()().mark(function a(){var t;return h()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Oe();case 2:t=p.sent,t!=null&&t.data&&(d(t.data),console.log(t.data));case 4:case"end":return p.stop()}},a)}));return function(){return c.apply(this,arguments)}}(),Q=function(){var c=P()(h()().mark(function a(t){var u;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return u=C.ZP.loading("Loading"),o.prev=1,o.next=4,ke(V()({},t));case 4:return u(),F(),C.ZP.success("Added successfully"),o.abrupt("return",!0);case 10:return o.prev=10,o.t0=o.catch(1),u(),C.ZP.error("Adding failed, please try again!"),o.abrupt("return",!1);case 15:case"end":return o.stop()}},a,null,[[1,10]])}));return function(t){return c.apply(this,arguments)}}(),K=function(){var c=P()(h()().mark(function a(t){var u;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return u=C.ZP.loading("Configuring"),o.prev=1,o.next=4,Re(V()({},t));case 4:return u(),F(),C.ZP.success("Todo Updated"),o.abrupt("return",!0);case 10:return o.prev=10,o.t0=o.catch(1),u(),C.ZP.error("Update failed"),o.abrupt("return",!1);case 15:case"end":return o.stop()}},a,null,[[1,10]])}));return function(t){return c.apply(this,arguments)}}(),U=function(){var c=P()(h()().mark(function a(t){var u,p,o;return h()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(u=C.ZP.loading("Loading"),t){j.next=3;break}return j.abrupt("return");case 3:return j.prev=3,j.next=6,Le(t);case 6:return u(),C.ZP.success("Deleted successfully and will refresh soon"),F(),(p=g.current)===null||p===void 0||p.clearSelected(),N([]),(o=g.current)===null||o===void 0||o.reload(),j.abrupt("return",!0);case 15:return j.prev=15,j.t0=j.catch(3),u(),C.ZP.error("Delete failed, please try again"),j.abrupt("return",!1);case 20:case"end":return j.stop()}},a,null,[[3,15]])}));return function(t){return c.apply(this,arguments)}}(),X=[{title:"Title",dataIndex:"title",sorter:!0},{title:"Description",dataIndex:"description",sorter:!0},{title:"Tags",dataIndex:"tags",render:function(a,t){return(0,e.jsx)("div",{children:t.tags.map(function(u,p){return(0,e.jsx)(q.Z,{color:We[Math.ceil(Math.random()*10)],children:u},u+p)})})}},{title:"CreatedAt",dataIndex:"createdAt",valueType:"date",sorter:function(a,t){return a.createdAt-t.createdAt}},{title:"Due Date",dataIndex:"dueDate",valueType:"date",sorter:function(a,t){return a.dueDate-t.dueDate}},{title:"Status",dataIndex:"status",valueType:"select",valueEnum:be,filters:!0},{title:"Edit",key:"edit",valueType:"option",width:120,render:function(a,t){return(0,e.jsx)("a",{onClick:function(){J(t.key),B(!0)},children:"Edit"},"link")}}];return(0,f.useEffect)(function(){F()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ve.Z,{actionRef:g,columns:X,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!1},request:function(a,t,u){if(t.title||t.description)return Promise.resolve({data:t.title==="ascend"||t.description==="ascend"?S.sort():S.sort().reverse(),success:!0});if(u.status){var p,o=(p=u.status)===null||p===void 0?void 0:p.map(function($){return $});return Promise.resolve({data:S.filter(function($){return o.includes($.status)}),success:!0})}return Promise.resolve({data:S,success:!0})},tableAlertRender:function(a){var t=a.selectedRowKeys,u=a.onCleanSelected;return t.length!==0&&N(t),(0,e.jsx)(R.Z,{size:24,children:(0,e.jsxs)("span",{children:[t.length," item selected",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:u,children:"Deselect"})]})})},tableAlertOptionRender:function(){return(0,e.jsx)(R.Z,{size:16,children:(0,e.jsx)(ze.Z,{title:"Delete todos",description:"Are you sure to delete todos?",onConfirm:function(){U(H)},okText:"Yes",cancelText:"No",placement:"leftTop",children:(0,e.jsx)("a",{children:"Delete"})})})},headerTitle:"Todo List",toolbar:{multipleLine:!0,search:{onSearch:function(a){var t;F(),d(z()(S).filter(function(u){return u.tags.some(function(p){return p.toLowerCase().includes(a.toLowerCase())})||u.description.toLowerCase().includes(a.toLowerCase())||u.title.toLowerCase().includes(a.toLowerCase())||be[u.status].text.toLowerCase()===a.toLowerCase()})),g==null||(t=g.current)===null||t===void 0||t.reload()}},actions:[(0,e.jsx)(Ge.Z,{menu:{items:w,onClick:function(a){var t;F(),d(z()(S).filter(function(u){return u.tags.includes(w.find(function(p){return p.key===a.key}).label)})),g==null||(t=g.current)===null||t===void 0||t.reload()}},children:(0,e.jsxs)(he.ZP,{children:["Tags",(0,e.jsx)($e.Z,{style:{marginInlineStart:8}})]})},"overlay"),(0,e.jsx)(he.ZP,{type:"primary",onClick:function(){Y(!0)},children:"Add Todo"},"add")]},search:!1,rowKey:"key",pagination:{pageSize:8,onChange:function(a){return console.log(a)},position:["bottomCenter"]},dateFormatter:"string"}),(0,e.jsx)(Ue,{addFormOpen:_,handleAddFormOpen:Y,handleAdd:Q,actionRef:g}),(0,e.jsx)(Ye,{editFormOpen:te,handleEditFormOpen:B,handleEdit:K,actionRef:g,todoData:S.find(function(c){return c.key===A})})]})},He=Je,Ie={container:"container___rJ2_Y",tableContainer:"tableContainer___9eeFg"},Qe=function(){return(0,e.jsx)("div",{className:Ie.container,children:(0,e.jsx)("div",{className:Ie.tableContainer,children:(0,e.jsx)(He,{})})})},Xe=Qe}}]);
