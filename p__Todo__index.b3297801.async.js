"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[352],{94630:function(qe,pe,s){s.r(pe),s.d(pe,{default:function(){return Qe}});var Ie=s(97857),fe=s.n(Ie),xe=s(15009),m=s.n(xe),Fe=s(99289),b=s.n(Fe),Ae=s(19632),Q=s.n(Ae),Ee=s(5574),y=s.n(Ee),z=[];function Pe(){return ie.apply(this,arguments)}function ie(){return ie=b()(m()().mark(function j(){var g;return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return g={data:Q()(z),total:z.length,success:!0},o.abrupt("return",g);case 2:case"end":return o.stop()}},j)})),ie.apply(this,arguments)}function ke(j){return oe.apply(this,arguments)}function oe(){return oe=b()(m()().mark(function j(g){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return z.push(g),o.abrupt("return",{success:!0,message:"Todo Added"});case 2:case"end":return o.stop()}},j)})),oe.apply(this,arguments)}function Oe(j){return de.apply(this,arguments)}function de(){return de=b()(m()().mark(function j(g){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return z=z.map(function(x){return x.key===g.key?g:x}),o.abrupt("return",{success:!0,message:"Todo Updated"});case 2:case"end":return o.stop()}},j)})),de.apply(this,arguments)}function Re(j){return ce.apply(this,arguments)}function ce(){return ce=b()(m()().mark(function j(g){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return z=z.filter(function(x){return!g.includes(x.key)}),o.abrupt("return",{success:!0,message:"Todo Updated"});case 2:case"end":return o.stop()}},j)})),ce.apply(this,arguments)}var $e=s(34804),Le=s(16714),S=s(2453),re=s(51904),L=s(26713),Ve=s(86738),ze=s(71648),ve=s(71577),p=s(67294),Be=s(52677),Ge=s.n(Be),he=s(51042),me=s(99351),X=s(97269),ge=s(5966),ye=s(64317),Ce=s(50335),Se=s(90672),Te=s(50261),De=s(92195),je=s(48726),ue=s(96365),we=s(83062),e=s(85893),Ne=function(g){var I=g.handleAddFormOpen,o=g.addFormOpen,x=g.handleAdd,B=g.actionRef,v=Te.Z.useForm(),G=y()(v,1),ne=G[0],ae=De.Z.useToken(),q=ae.token,se=(0,p.useState)([]),N=y()(se,2),Z=N[0],T=N[1],A=(0,p.useState)(!1),U=y()(A,2),V=U[0],k=U[1],_=(0,p.useState)(""),ee=y()(_,2),E=ee[0],F=ee[1],K=(0,p.useState)(-1),M=y()(K,2),D=M[0],P=M[1],O=(0,p.useState)(""),te=y()(O,2),Y=te[0],W=te[1],J=(0,p.useRef)(null),c=(0,p.useRef)(null);(0,p.useEffect)(function(){if(V){var d;(d=J.current)===null||d===void 0||d.focus()}},[V]),(0,p.useEffect)(function(){var d;(d=c.current)===null||d===void 0||d.focus()},[E]);var a=function(t){var n=Z.filter(function(i){return i!==t});console.log(n),T(n)},r=function(){k(!0)},u=function(t){F(t.target.value)},h=function(){E&&Z.indexOf(E)===-1&&T([].concat(Q()(Z),[E])),k(!1),F("")},l=function(t){W(t.target.value)},R=function(){var t=Q()(Z);t[D]=Y,T(t),P(-1),F("")},C={width:100,verticalAlign:"top"},le={background:q.colorBgContainer,borderStyle:"dashed"};return(0,e.jsxs)(me.Y,{title:"Add Todo",form:ne,onOpenChange:I,open:o,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){T([])}},submitTimeout:2e3,onFinish:function(){var d=b()(m()().mark(function t(n){var i,w,$,H;return m()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(console.log(Ge()(n.dueDate)),!(n.title===void 0||n.title.trim()==="")){f.next=4;break}return S.ZP.error("Title is mandatory"),f.abrupt("return");case 4:if(!(n.description===void 0||n.description.trim()==="")){f.next=7;break}return S.ZP.error("Description is mandatory"),f.abrupt("return");case 7:if(!(n.status===void 0||n.status.trim()==="")){f.next=10;break}return S.ZP.error("Status is mandatory"),f.abrupt("return");case 10:if(!(n.dueDate&&new Date(n.dueDate)<=new Date)){f.next=13;break}return S.ZP.error("Due date should be more than current date"),f.abrupt("return");case 13:return $={key:Math.ceil(Math.random()*1e6)+Date.now(),createdAt:Date.now(),title:n.title,description:n.description,tags:Z!=null?Z:[],dueDate:(i=Number(new Date((w=n.dueDate)!==null&&w!==void 0?w:0)))!==null&&i!==void 0?i:0,status:n.status},f.next=16,x($);case 16:H=f.sent,H&&(I(!1),T([]),B.current&&B.current.reload());case 18:case"end":return f.stop()}},t)}));return function(t){return d.apply(this,arguments)}}(),children:[(0,e.jsxs)(X.A.Group,{children:[(0,e.jsx)(ge.Z,{width:"md",name:"title",label:"Title",tooltip:"Upto 100 characters",placeholder:"Please enter a title",fieldProps:{maxLength:100,showCount:!0,required:!0},required:!0}),(0,e.jsx)(ye.Z,{request:b()(m()().mark(function d(){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",[{value:"close",label:"Open"},{value:"running",label:"Working"},{value:"online",label:"Done"},{value:"error",label:"Over Due"}]);case 1:case"end":return n.stop()}},d)})),width:"xs",name:"status",label:"Status",required:!0}),(0,e.jsx)(Ce.Z,{name:"dueDate",label:"Due Date"})]}),(0,e.jsxs)(X.A.Group,{children:[(0,e.jsx)(Se.Z,{width:"md",name:"description",label:"Description",placeholder:"Please enter a description",fieldProps:{maxLength:1e3,showCount:!0,required:!0},required:!0}),(0,e.jsxs)(X.A.Group,{direction:"vertical",children:[(0,e.jsx)(je.Z,{style:{paddingBottom:8},children:"Tags"}),(0,e.jsx)(L.Z,{direction:"vertical",size:[0,8],children:(0,e.jsxs)(L.Z,{size:[0,4],wrap:!0,children:[(0,e.jsx)(L.Z,{size:[0,8],wrap:!0,children:Z.map(function(d,t){if(D===t)return(0,e.jsx)(ue.Z,{ref:c,size:"small",style:C,value:Y,onChange:l,onBlur:R,onPressEnter:R},d);var n=d.length>20,i=(0,e.jsx)(re.Z,{closable:!0,style:{userSelect:"none"},onClose:function(){return a(d)},children:(0,e.jsx)("span",{onDoubleClick:function($){t!==0&&(P(t),W(d),$.preventDefault())},children:n?"".concat(d.slice(0,20),"..."):d})},d);return n?(0,e.jsx)(we.Z,{title:d,children:i},d):i})}),V?(0,e.jsx)(ue.Z,{ref:J,type:"text",size:"small",style:C,value:E,onChange:u,onBlur:h,onPressEnter:h}):(0,e.jsxs)(re.Z,{style:le,onClick:r,children:[(0,e.jsx)(he.Z,{})," New Tag"]})]})})]})]})]})},Ue=Ne,Ke=function(g){var I=g.handleEditFormOpen,o=g.editFormOpen,x=g.handleEdit,B=g.actionRef,v=g.todoData,G=Te.Z.useForm(),ne=y()(G,1),ae=ne[0],q=De.Z.useToken(),se=q.token,N=(0,p.useState)([]),Z=y()(N,2),T=Z[0],A=Z[1],U=(0,p.useState)(!1),V=y()(U,2),k=V[0],_=V[1],ee=(0,p.useState)(""),E=y()(ee,2),F=E[0],K=E[1],M=(0,p.useState)(-1),D=y()(M,2),P=D[0],O=D[1],te=(0,p.useState)(""),Y=y()(te,2),W=Y[0],J=Y[1],c=(0,p.useRef)(null),a=(0,p.useRef)(null);(0,p.useEffect)(function(){if(k){var t;(t=c.current)===null||t===void 0||t.focus()}},[k]),(0,p.useEffect)(function(){var t;(t=a.current)===null||t===void 0||t.focus()},[F]);var r=function(n){var i=T.filter(function(w){return w!==n});console.log(i),A(i)},u=function(){_(!0)},h=function(n){K(n.target.value)},l=function(){F&&T.indexOf(F)===-1&&A([].concat(Q()(T),[F])),_(!1),K("")},R=function(n){J(n.target.value)},C=function(){var n=Q()(T);n[P]=W,A(n),O(-1),K("")},le={width:100,verticalAlign:"top"},d={background:se.colorBgContainer,borderStyle:"dashed"};return(0,p.useEffect)(function(){var t;A((t=v==null?void 0:v.tags)!==null&&t!==void 0?t:[])},[v==null?void 0:v.tags]),(0,e.jsxs)(me.Y,{title:"Edit Todo",form:ae,onOpenChange:I,open:o,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){return A([])}},submitTimeout:2e3,onFinish:function(){var t=b()(m()().mark(function n(i){var w,$,H;return m()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(i.title===void 0||i.title.trim()==="")){f.next=3;break}return S.ZP.error("Title is mandatory"),f.abrupt("return");case 3:if(!(i.description===void 0||i.description.trim()==="")){f.next=6;break}return S.ZP.error("Description is mandatory"),f.abrupt("return");case 6:if(!(i.status===void 0||i.status.trim()==="")){f.next=9;break}return S.ZP.error("Status is mandatory"),f.abrupt("return");case 9:if(!(i.dueDate&&new Date(i.dueDate)<=new Date)){f.next=12;break}return S.ZP.error("Due date should be more than current date"),f.abrupt("return");case 12:return $={key:v==null?void 0:v.key,createdAt:Date.now(),title:i.title,description:i.description,tags:T!=null?T:[],dueDate:(w=Number(new Date(i.dueDate)))!==null&&w!==void 0?w:0,status:i.status},f.next=15,x($);case 15:H=f.sent,H&&(I(!1),A([]),B.current&&B.current.reload());case 17:case"end":return f.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),children:[(0,e.jsxs)(X.A.Group,{children:[(0,e.jsx)(ge.Z,{width:"md",name:"title",label:"Title",tooltip:"Upto 100 characters",placeholder:"Please enter a title",initialValue:v==null?void 0:v.title,fieldProps:{maxLength:100,showCount:!0,required:!0},required:!0}),(0,e.jsx)(ye.Z,{request:b()(m()().mark(function t(){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[{value:"close",label:"Open"},{value:"running",label:"Working"},{value:"online",label:"Done"},{value:"error",label:"Over Due"}]);case 1:case"end":return i.stop()}},t)})),width:"xs",name:"status",label:"Status",initialValue:v==null?void 0:v.status,required:!0}),(0,e.jsx)(Ce.Z,{initialValue:v==null?void 0:v.dueDate,name:"dueDate",label:"Due Date"})]}),(0,e.jsxs)(X.A.Group,{children:[(0,e.jsx)(Se.Z,{initialValue:v==null?void 0:v.description,width:"md",name:"description",label:"Description",placeholder:"Please enter a description",fieldProps:{maxLength:1e3,showCount:!0,required:!0},required:!0}),(0,e.jsxs)(X.A.Group,{direction:"vertical",children:[(0,e.jsx)(je.Z,{style:{paddingBottom:8},children:"Tags"}),(0,e.jsx)(L.Z,{direction:"vertical",size:[0,8],children:(0,e.jsxs)(L.Z,{size:[0,4],wrap:!0,children:[(0,e.jsx)(L.Z,{size:[0,8],wrap:!0,children:T.map(function(t,n){if(P===n)return(0,e.jsx)(ue.Z,{ref:a,size:"small",style:le,value:W,onChange:R,onBlur:C,onPressEnter:C},t);var i=t.length>20,w=(0,e.jsx)(re.Z,{closable:!0,style:{userSelect:"none"},onClose:function(){return r(t)},children:(0,e.jsx)("span",{onDoubleClick:function(H){n!==0&&(O(n),J(t),H.preventDefault())},children:i?"".concat(t.slice(0,20),"..."):t})},t);return i?(0,e.jsx)(we.Z,{title:t,children:w},t):w})}),k?(0,e.jsx)(ue.Z,{ref:c,type:"text",size:"small",style:le,value:F,onChange:h,onBlur:l,onPressEnter:l}):(0,e.jsxs)(re.Z,{style:d,onClick:u,children:[(0,e.jsx)(he.Z,{})," New Tag"]})]})})]})]})]})},Me=Ke,_e={0:"close",1:"running",2:"online",3:"error"},Ze={close:{text:"Open",status:"Default"},running:{text:"Working",status:"Processing"},online:{text:"Done",status:"Success"},error:{text:"Over Due",status:"Error"}},Ye=["magenta","red","volcano","orange","gold","lime","green","cyan","blue","geekblue","purple"],We=function(){var g=(0,p.useState)([]),I=y()(g,2),o=I[0],x=I[1],B=(0,p.useState)([]),v=y()(B,2),G=v[0],ne=v[1],ae=(0,p.useState)(!1),q=y()(ae,2),se=q[0],N=q[1],Z=(0,p.useState)(!1),T=y()(Z,2),A=T[0],U=T[1],V=(0,p.useState)(0),k=y()(V,2),_=k[0],ee=k[1],E=(0,p.useState)([]),F=y()(E,2),K=F[0],M=F[1],D=(0,p.useRef)(),P=[];o.length!==0&&G.forEach(function(c){P.push.apply(P,Q()(c.tags.map(function(a,r){return{label:a,key:a+r}})))});var O=function(){var c=b()(m()().mark(function a(){var r;return m()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Pe();case 2:r=h.sent,r!=null&&r.data&&(x(r.data),ne(r.data));case 4:case"end":return h.stop()}},a)}));return function(){return c.apply(this,arguments)}}(),te=function(){var c=b()(m()().mark(function a(r){var u;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=S.ZP.loading("Loading"),l.prev=1,l.next=4,ke(fe()({},r));case 4:return u(),O(),S.ZP.success("Added successfully"),l.abrupt("return",!0);case 10:return l.prev=10,l.t0=l.catch(1),u(),S.ZP.error("Adding failed, please try again!"),l.abrupt("return",!1);case 15:case"end":return l.stop()}},a,null,[[1,10]])}));return function(r){return c.apply(this,arguments)}}(),Y=function(){var c=b()(m()().mark(function a(r){var u;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=S.ZP.loading("Configuring"),l.prev=1,l.next=4,Oe(fe()({},r));case 4:return u(),O(),S.ZP.success("Todo Updated"),l.abrupt("return",!0);case 10:return l.prev=10,l.t0=l.catch(1),u(),S.ZP.error("Update failed"),l.abrupt("return",!1);case 15:case"end":return l.stop()}},a,null,[[1,10]])}));return function(r){return c.apply(this,arguments)}}(),W=function(){var c=b()(m()().mark(function a(r){var u,h,l;return m()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(u=S.ZP.loading("Loading"),r){C.next=3;break}return C.abrupt("return");case 3:return C.prev=3,C.next=6,Re(r);case 6:return u(),S.ZP.success("Deleted successfully and will refresh soon"),O(),(h=D.current)===null||h===void 0||h.clearSelected(),M([]),(l=D.current)===null||l===void 0||l.reload(),C.abrupt("return",!0);case 15:return C.prev=15,C.t0=C.catch(3),u(),S.ZP.error("Delete failed, please try again"),C.abrupt("return",!1);case 20:case"end":return C.stop()}},a,null,[[3,15]])}));return function(r){return c.apply(this,arguments)}}(),J=[{title:"Title",dataIndex:"title",sorter:!0},{title:"Description",dataIndex:"description",sorter:!0},{title:"Tags",dataIndex:"tags",render:function(a,r){return(0,e.jsx)("div",{children:r.tags.map(function(u,h){return(0,e.jsx)(re.Z,{color:Ye[Math.ceil(Math.random()*10)],children:u},u+h)})})}},{title:"CreatedAt",dataIndex:"createdAt",valueType:"date",sorter:function(a,r){return a.createdAt-r.createdAt}},{title:"Due Date",dataIndex:"dueDate",valueType:"date",sorter:function(a,r){return a.dueDate-r.dueDate}},{title:"Status",dataIndex:"status",valueType:"select",valueEnum:Ze,filters:!0},{title:"Edit",key:"edit",valueType:"option",width:120,render:function(a,r){return(0,e.jsx)("a",{onClick:function(){ee(r.key),U(!0)},children:"Edit"},"link")}}];return(0,p.useEffect)(function(){O()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Le.Z,{actionRef:D,columns:J,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!1},request:function(a,r,u){if(r.title||r.description)return Promise.resolve({data:r.title==="ascend"||r.description==="ascend"?o.sort():o.sort().reverse(),success:!0});if(u.status){var h,l=(h=u.status)===null||h===void 0?void 0:h.map(function(R){return R});return Promise.resolve({data:o.filter(function(R){return l.includes(R.status)}),success:!0})}return Promise.resolve({data:o,success:!0})},tableAlertRender:function(a){var r=a.selectedRowKeys,u=a.onCleanSelected;return r.length!==0&&M(r),(0,e.jsx)(L.Z,{size:24,children:(0,e.jsxs)("span",{children:[r.length," item selected",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:u,children:"Deselect"})]})})},tableAlertOptionRender:function(){return(0,e.jsx)(L.Z,{size:16,children:(0,e.jsx)(Ve.Z,{title:"Delete todos",description:"Are you sure to delete todos?",onConfirm:function(){W(K)},okText:"Yes",cancelText:"No",placement:"leftTop",children:(0,e.jsx)("a",{children:"Delete"})})})},headerTitle:"Todo List",toolbar:{multipleLine:!0,search:{onSearch:function(a){var r;x(G.filter(function(u){return u.tags.some(function(h){return h.toLowerCase().includes(a.toLowerCase())})||u.description.toLowerCase().includes(a.toLowerCase())||u.title.toLowerCase().includes(a.toLowerCase())||Ze[u.status].text.toLowerCase()===a.toLowerCase()})),D==null||(r=D.current)===null||r===void 0||r.reload()}},actions:[(0,e.jsx)(ze.Z,{menu:{items:P,onClick:function(a){var r;x(G.filter(function(u){return u.tags.includes(P.find(function(h){return h.key===a.key}).label)})),D==null||(r=D.current)===null||r===void 0||r.reload()}},children:(0,e.jsxs)(ve.ZP,{children:["Tags",(0,e.jsx)($e.Z,{style:{marginInlineStart:8}})]})},"overlay"),(0,e.jsx)(ve.ZP,{type:"primary",onClick:function(){N(!0)},children:"Add Todo"},"add")]},search:!1,rowKey:"key",pagination:{pageSize:8,onChange:function(a){return console.log(a)},position:["bottomCenter"]},dateFormatter:"string"}),(0,e.jsx)(Ue,{addFormOpen:se,handleAddFormOpen:N,handleAdd:te,actionRef:D}),(0,e.jsx)(Me,{editFormOpen:A,handleEditFormOpen:U,handleEdit:Y,actionRef:D,todoData:o.find(function(c){return c.key===_})})]})},Je=We,be={container:"container___rJ2_Y",tableContainer:"tableContainer___9eeFg"},He=function(){return(0,e.jsx)("div",{className:be.container,children:(0,e.jsx)("div",{className:be.tableContainer,children:(0,e.jsx)(Je,{})})})},Qe=He}}]);
