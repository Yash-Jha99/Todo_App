"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[352],{94630:function(qe,pe,s){s.r(pe),s.d(pe,{default:function(){return Xe}});var xe=s(97857),ve=s.n(xe),Fe=s(15009),h=s.n(Fe),Ae=s(99289),x=s.n(Ae),Ee=s(19632),R=s.n(Ee),Pe=s(5574),y=s.n(Pe),z=[];function ke(){return oe.apply(this,arguments)}function oe(){return oe=x()(h()().mark(function D(){var m;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return m={data:R()(z),total:z.length,success:!0},l.abrupt("return",m);case 2:case"end":return l.stop()}},D)})),oe.apply(this,arguments)}function Oe(D){return de.apply(this,arguments)}function de(){return de=x()(h()().mark(function D(m){return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return z.push(m),l.abrupt("return",{success:!0,message:"Todo Added"});case 2:case"end":return l.stop()}},D)})),de.apply(this,arguments)}function Re(D){return ce.apply(this,arguments)}function ce(){return ce=x()(h()().mark(function D(m){return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return z=z.map(function(A){return A.key===m.key?m:A}),l.abrupt("return",{success:!0,message:"Todo Updated"});case 2:case"end":return l.stop()}},D)})),ce.apply(this,arguments)}function $e(D){return fe.apply(this,arguments)}function fe(){return fe=x()(h()().mark(function D(m){return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return z=z.filter(function(A){return!m.includes(A.key)}),l.abrupt("return",{success:!0,message:"Todo Updated"});case 2:case"end":return l.stop()}},D)})),fe.apply(this,arguments)}var Le=s(34804),Ve=s(16714),C=s(2453),q=s(51904),$=s(26713),ze=s(86738),Ne=s(71648),he=s(71577),p=s(67294),Be=s(52677),Ge=s.n(Be),me=s(51042),ge=s(99351),M=s(97269),ye=s(5966),Ce=s(64317),Se=s(50335),Te=s(90672),De=s(50261),je=s(92195),we=s(48726),ae=s(96365),Ze=s(83062),e=s(85893),Ue=function(m){var F=m.handleAddFormOpen,l=m.addFormOpen,A=m.handleAdd,N=m.actionRef,v=De.Z.useForm(),_=y()(v,1),Y=_[0],ee=je.Z.useToken(),W=ee.token,te=(0,p.useState)([]),B=y()(te,2),Z=B[0],S=B[1],P=(0,p.useState)(!1),J=y()(P,2),L=J[0],k=J[1],H=(0,p.useState)(""),G=y()(H,2),g=G[0],j=G[1],E=(0,p.useState)(-1),Q=y()(E,2),U=Q[0],K=Q[1],X=(0,p.useState)(""),c=y()(X,2),a=c[0],t=c[1],u=(0,p.useRef)(null),f=(0,p.useRef)(null);(0,p.useEffect)(function(){if(L){var d;(d=u.current)===null||d===void 0||d.focus()}},[L]),(0,p.useEffect)(function(){var d;(d=f.current)===null||d===void 0||d.focus()},[g]);var i=function(r){var n=Z.filter(function(o){return o!==r});console.log(n),S(n)},V=function(){k(!0)},T=function(r){j(r.target.value)},se=function(){g&&Z.indexOf(g)===-1&&S([].concat(R()(Z),[g])),k(!1),j("")},ue=function(r){t(r.target.value)},le=function(){var r=R()(Z);r[U]=a,S(r),K(-1),j("")},re={width:100,verticalAlign:"top"},ie={background:W.colorBgContainer,borderStyle:"dashed"};return(0,e.jsxs)(ge.Y,{title:"Add Todo",form:Y,onOpenChange:F,open:l,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){S([])}},submitTimeout:2e3,onFinish:function(){var d=x()(h()().mark(function r(n){var o,b,O;return h()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(console.log(Ge()(n.dueDate)),!(n.title===void 0||n.title.trim()==="")){w.next=4;break}return C.ZP.error("Title is mandatory"),w.abrupt("return");case 4:if(!(n.description===void 0||n.description.trim()==="")){w.next=7;break}return C.ZP.error("Description is mandatory"),w.abrupt("return");case 7:if(!(n.status===void 0||n.status.trim()==="")){w.next=10;break}return C.ZP.error("Status is mandatory"),w.abrupt("return");case 10:if(!(n.dueDate&&new Date(n.dueDate)<=new Date)){w.next=13;break}return C.ZP.error("Due date should be more than current date"),w.abrupt("return");case 13:return b={key:Math.ceil(Math.random()*1e6)+Date.now(),createdAt:Date.now(),title:n.title,description:n.description,tags:Z!=null?Z:[],dueDate:(o=Number(new Date(n.dueDate)))!==null&&o!==void 0?o:0,status:n.status},w.next=16,A(b);case 16:O=w.sent,O&&(F(!1),S([]),N.current&&N.current.reload());case 18:case"end":return w.stop()}},r)}));return function(r){return d.apply(this,arguments)}}(),children:[(0,e.jsxs)(M.A.Group,{children:[(0,e.jsx)(ye.Z,{width:"md",name:"title",label:"Title",tooltip:"Upto 100 characters",placeholder:"Please enter a title",fieldProps:{maxLength:100,showCount:!0,required:!0},required:!0}),(0,e.jsx)(Ce.Z,{request:x()(h()().mark(function d(){return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",[{value:"close",label:"Open"},{value:"running",label:"Working"},{value:"online",label:"Done"},{value:"error",label:"Over Due"}]);case 1:case"end":return n.stop()}},d)})),width:"xs",name:"status",label:"Status",required:!0}),(0,e.jsx)(Se.Z,{name:"dueDate",label:"Due Date"})]}),(0,e.jsxs)(M.A.Group,{children:[(0,e.jsx)(Te.Z,{width:"md",name:"description",label:"Description",placeholder:"Please enter a description",fieldProps:{maxLength:1e3,showCount:!0,required:!0},required:!0}),(0,e.jsxs)(M.A.Group,{direction:"vertical",children:[(0,e.jsx)(we.Z,{style:{paddingBottom:8},children:"Tags"}),(0,e.jsx)($.Z,{direction:"vertical",size:[0,8],children:(0,e.jsxs)($.Z,{size:[0,4],wrap:!0,children:[(0,e.jsx)($.Z,{size:[0,8],wrap:!0,children:Z.map(function(d,r){if(U===r)return(0,e.jsx)(ae.Z,{ref:f,size:"small",style:re,value:a,onChange:ue,onBlur:le,onPressEnter:le},d);var n=d.length>20,o=(0,e.jsx)(q.Z,{closable:!0,style:{userSelect:"none"},onClose:function(){return i(d)},children:(0,e.jsx)("span",{onDoubleClick:function(O){r!==0&&(K(r),t(d),O.preventDefault())},children:n?"".concat(d.slice(0,20),"..."):d})},d);return n?(0,e.jsx)(Ze.Z,{title:d,children:o},d):o})}),L?(0,e.jsx)(ae.Z,{ref:u,type:"text",size:"small",style:re,value:g,onChange:T,onBlur:se,onPressEnter:se}):(0,e.jsxs)(q.Z,{style:ie,onClick:V,children:[(0,e.jsx)(me.Z,{})," New Tag"]})]})})]})]})]})},Ke=Ue,Me=function(m){var F=m.handleEditFormOpen,l=m.editFormOpen,A=m.handleEdit,N=m.actionRef,v=m.todoData,_=De.Z.useForm(),Y=y()(_,1),ee=Y[0],W=je.Z.useToken(),te=W.token,B=(0,p.useState)([]),Z=y()(B,2),S=Z[0],P=Z[1],J=(0,p.useState)(!1),L=y()(J,2),k=L[0],H=L[1],G=(0,p.useState)(""),g=y()(G,2),j=g[0],E=g[1],Q=(0,p.useState)(-1),U=y()(Q,2),K=U[0],X=U[1],c=(0,p.useState)(""),a=y()(c,2),t=a[0],u=a[1],f=(0,p.useRef)(null),i=(0,p.useRef)(null);(0,p.useEffect)(function(){if(k){var r;(r=f.current)===null||r===void 0||r.focus()}},[k]),(0,p.useEffect)(function(){var r;(r=i.current)===null||r===void 0||r.focus()},[j]);var V=function(n){var o=S.filter(function(b){return b!==n});console.log(o),P(o)},T=function(){H(!0)},se=function(n){E(n.target.value)},ue=function(){j&&S.indexOf(j)===-1&&P([].concat(R()(S),[j])),H(!1),E("")},le=function(n){u(n.target.value)},re=function(){var n=R()(S);n[K]=t,P(n),X(-1),E("")},ie={width:100,verticalAlign:"top"},d={background:te.colorBgContainer,borderStyle:"dashed"};return(0,p.useEffect)(function(){var r;P((r=v==null?void 0:v.tags)!==null&&r!==void 0?r:[])},[v==null?void 0:v.tags]),(0,e.jsxs)(ge.Y,{title:"Edit Todo",form:ee,onOpenChange:F,open:l,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){return P([])}},submitTimeout:2e3,onFinish:function(){var r=x()(h()().mark(function n(o){var b,O,ne;return h()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(o.title===void 0||o.title.trim()==="")){I.next=3;break}return C.ZP.error("Title is mandatory"),I.abrupt("return");case 3:if(!(o.description===void 0||o.description.trim()==="")){I.next=6;break}return C.ZP.error("Description is mandatory"),I.abrupt("return");case 6:if(!(o.status===void 0||o.status.trim()==="")){I.next=9;break}return C.ZP.error("Status is mandatory"),I.abrupt("return");case 9:if(!(o.dueDate&&new Date(o.dueDate)<=new Date)){I.next=12;break}return C.ZP.error("Due date should be more than current date"),I.abrupt("return");case 12:return O={key:v==null?void 0:v.key,createdAt:Date.now(),title:o.title,description:o.description,tags:S!=null?S:[],dueDate:(b=Number(new Date(o.dueDate)))!==null&&b!==void 0?b:0,status:o.status},I.next=15,A(O);case 15:ne=I.sent,ne&&(F(!1),P([]),N.current&&N.current.reload());case 17:case"end":return I.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),children:[(0,e.jsxs)(M.A.Group,{children:[(0,e.jsx)(ye.Z,{width:"md",name:"title",label:"Title",tooltip:"Upto 100 characters",placeholder:"Please enter a title",initialValue:v==null?void 0:v.title,fieldProps:{maxLength:100,showCount:!0,required:!0},required:!0}),(0,e.jsx)(Ce.Z,{request:x()(h()().mark(function r(){return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",[{value:"close",label:"Open"},{value:"running",label:"Working"},{value:"online",label:"Done"},{value:"error",label:"Over Due"}]);case 1:case"end":return o.stop()}},r)})),width:"xs",name:"status",label:"Status",initialValue:v==null?void 0:v.status,required:!0}),(0,e.jsx)(Se.Z,{initialValue:Number.isNaN(v==null?void 0:v.dueDate)&&!1,name:"dueDate",label:"Due Date"})]}),(0,e.jsxs)(M.A.Group,{children:[(0,e.jsx)(Te.Z,{initialValue:v==null?void 0:v.description,width:"md",name:"description",label:"Description",placeholder:"Please enter a description",fieldProps:{maxLength:1e3,showCount:!0,required:!0},required:!0}),(0,e.jsxs)(M.A.Group,{direction:"vertical",children:[(0,e.jsx)(we.Z,{style:{paddingBottom:8},children:"Tags"}),(0,e.jsx)($.Z,{direction:"vertical",size:[0,8],children:(0,e.jsxs)($.Z,{size:[0,4],wrap:!0,children:[(0,e.jsx)($.Z,{size:[0,8],wrap:!0,children:S.map(function(r,n){if(K===n)return(0,e.jsx)(ae.Z,{ref:i,size:"small",style:ie,value:t,onChange:le,onBlur:re,onPressEnter:re},r);var o=r.length>20,b=(0,e.jsx)(q.Z,{closable:!0,style:{userSelect:"none"},onClose:function(){return V(r)},children:(0,e.jsx)("span",{onDoubleClick:function(ne){n!==0&&(X(n),u(r),ne.preventDefault())},children:o?"".concat(r.slice(0,20),"..."):r})},r);return o?(0,e.jsx)(Ze.Z,{title:r,children:b},r):b})}),k?(0,e.jsx)(ae.Z,{ref:f,type:"text",size:"small",style:ie,value:j,onChange:se,onBlur:ue,onPressEnter:ue}):(0,e.jsxs)(q.Z,{style:d,onClick:T,children:[(0,e.jsx)(me.Z,{})," New Tag"]})]})})]})]})]})},Ye=Me,_e={0:"close",1:"running",2:"online",3:"error"},be={close:{text:"Open",status:"Default"},running:{text:"Working",status:"Processing"},online:{text:"Done",status:"Success"},error:{text:"Over Due",status:"Error"}},We=["magenta","red","volcano","orange","gold","lime","green","cyan","blue","geekblue","purple"],Je=function(){var m=(0,p.useState)([]),F=y()(m,2),l=F[0],A=F[1],N=(0,p.useState)(!1),v=y()(N,2),_=v[0],Y=v[1],ee=(0,p.useState)(!1),W=y()(ee,2),te=W[0],B=W[1],Z=(0,p.useState)(0),S=y()(Z,2),P=S[0],J=S[1],L=(0,p.useState)([]),k=y()(L,2),H=k[0],G=k[1],g=(0,p.useRef)(),j=[];l.length!==0&&l.forEach(function(c){j.push.apply(j,R()(c.tags.map(function(a,t){return{label:a,key:a+t}})))});var E=function(){var c=x()(h()().mark(function a(){var t;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,ke();case 2:t=f.sent,t!=null&&t.data&&(A(t.data),console.log(t.data));case 4:case"end":return f.stop()}},a)}));return function(){return c.apply(this,arguments)}}(),Q=function(){var c=x()(h()().mark(function a(t){var u;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return u=C.ZP.loading("Loading"),i.prev=1,i.next=4,Oe(ve()({},t));case 4:return u(),E(),C.ZP.success("Added successfully"),i.abrupt("return",!0);case 10:return i.prev=10,i.t0=i.catch(1),u(),C.ZP.error("Adding failed, please try again!"),i.abrupt("return",!1);case 15:case"end":return i.stop()}},a,null,[[1,10]])}));return function(t){return c.apply(this,arguments)}}(),U=function(){var c=x()(h()().mark(function a(t){var u;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return u=C.ZP.loading("Configuring"),i.prev=1,i.next=4,Re(ve()({},t));case 4:return u(),E(),C.ZP.success("Todo Updated"),i.abrupt("return",!0);case 10:return i.prev=10,i.t0=i.catch(1),u(),C.ZP.error("Update failed"),i.abrupt("return",!1);case 15:case"end":return i.stop()}},a,null,[[1,10]])}));return function(t){return c.apply(this,arguments)}}(),K=function(){var c=x()(h()().mark(function a(t){var u,f,i;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(u=C.ZP.loading("Loading"),t){T.next=3;break}return T.abrupt("return");case 3:return T.prev=3,T.next=6,$e(t);case 6:return u(),C.ZP.success("Deleted successfully and will refresh soon"),E(),(f=g.current)===null||f===void 0||f.clearSelected(),G([]),(i=g.current)===null||i===void 0||i.reload(),T.abrupt("return",!0);case 15:return T.prev=15,T.t0=T.catch(3),u(),C.ZP.error("Delete failed, please try again"),T.abrupt("return",!1);case 20:case"end":return T.stop()}},a,null,[[3,15]])}));return function(t){return c.apply(this,arguments)}}(),X=[{title:"Title",dataIndex:"title",sorter:!0},{title:"Description",dataIndex:"description",sorter:!0},{title:"Tags",dataIndex:"tags",render:function(a,t){return(0,e.jsx)("div",{children:t.tags.map(function(u,f){return(0,e.jsx)(q.Z,{color:We[Math.ceil(Math.random()*10)],children:u},u+f)})})}},{title:"CreatedAt",dataIndex:"createdAt",valueType:"date",sorter:function(a,t){return a.createdAt-t.createdAt}},{title:"Due Date",dataIndex:"dueDate",valueType:"date",sorter:function(a,t){return a.dueDate-t.dueDate}},{title:"Status",dataIndex:"status",valueType:"select",valueEnum:be,filters:!0},{title:"Edit",key:"edit",valueType:"option",width:120,render:function(a,t){return(0,e.jsx)("a",{onClick:function(){J(t.key),B(!0)},children:"Edit"},"link")}}];return(0,p.useEffect)(function(){E()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ve.Z,{actionRef:g,columns:X,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!1},request:function(a,t,u){if(t.title||t.description)return Promise.resolve({data:t.title==="ascend"||t.description==="ascend"?l.sort():l.sort().reverse(),success:!0});if(u.status){var f,i=(f=u.status)===null||f===void 0?void 0:f.map(function(V){return V});return Promise.resolve({data:l.filter(function(V){return i.includes(V.status)}),success:!0})}return Promise.resolve({data:l,success:!0})},tableAlertRender:function(a){var t=a.selectedRowKeys,u=a.onCleanSelected;return t.length!==0&&G(t),(0,e.jsx)($.Z,{size:24,children:(0,e.jsxs)("span",{children:[t.length," item selected",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:u,children:"Deselect"})]})})},tableAlertOptionRender:function(){return(0,e.jsx)($.Z,{size:16,children:(0,e.jsx)(ze.Z,{title:"Delete todos",description:"Are you sure to delete todos?",onConfirm:function(){K(H)},okText:"Yes",cancelText:"No",placement:"leftTop",children:(0,e.jsx)("a",{children:"Delete"})})})},headerTitle:"Todo List",toolbar:{multipleLine:!0,search:{onSearch:function(a){var t;E(),A(R()(l).filter(function(u){return u.tags.some(function(f){return f.toLowerCase().includes(a.toLowerCase())})||u.description.toLowerCase().includes(a.toLowerCase())||u.title.toLowerCase().includes(a.toLowerCase())||be[u.status].text.toLowerCase()===a.toLowerCase()})),g==null||(t=g.current)===null||t===void 0||t.reload()}},actions:[(0,e.jsx)(Ne.Z,{menu:{items:j,onClick:function(a){var t;E(),A(R()(l).filter(function(u){return u.tags.includes(j.find(function(f){return f.key===a.key}).label)})),g==null||(t=g.current)===null||t===void 0||t.reload()}},children:(0,e.jsxs)(he.ZP,{children:["Tags",(0,e.jsx)(Le.Z,{style:{marginInlineStart:8}})]})},"overlay"),(0,e.jsx)(he.ZP,{type:"primary",onClick:function(){Y(!0)},children:"Add Todo"},"add")]},search:!1,rowKey:"key",pagination:{pageSize:8,onChange:function(a){return console.log(a)},position:["bottomCenter"]},dateFormatter:"string"}),(0,e.jsx)(Ke,{addFormOpen:_,handleAddFormOpen:Y,handleAdd:Q,actionRef:g}),(0,e.jsx)(Ye,{editFormOpen:te,handleEditFormOpen:B,handleEdit:U,actionRef:g,todoData:l.find(function(c){return c.key===P})})]})},He=Je,Ie={container:"container___rJ2_Y",tableContainer:"tableContainer___9eeFg"},Qe=function(){return(0,e.jsx)("div",{className:Ie.container,children:(0,e.jsx)("div",{className:Ie.tableContainer,children:(0,e.jsx)(He,{})})})},Xe=Qe}}]);
